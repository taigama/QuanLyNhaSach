@model BookStore.Models.Author
@using BookStore.Helpers;
@using System.Globalization;

@{
    ViewBag.Title = Model.Name + " | Nhà sách AC";
    Layout = "~/Views/MyShared/MainLayout.cshtml";
    CultureInfo ci = new CultureInfo("vi-VN");
}
<section>
    <div class="container" style="margin-top:150px">
        <div class="row">
            <div class="col-lg-3" style="background-color: #eee;padding-top:10px">
                <div class="left-sidebar">
                    @Html.Partial("SideMenu")
                </div>
            </div>


            <div class="left-ads-display col-md-9">

                <div class="product-details">
                    <!--author-details-->
                    <div class="col-lg-5">
                        <div id="panel_img" class="view-product" style="height:200px">
                            @if (Model.Image != null)
                            {<text>
                                    <img src="@HtmlExtensions.GetImagePath(Model.Image, this.Context)" alt="" style="height:100%;width:100%;object-fit:contain" onerror="if (this.src != '/Assets/images/staff/avatar.png') this.src = '/Assets/images/staff/avatar.png';" />
                            </text>}
                        else
                        {<text>
                                <img src="/Assets/images/staff/avatar.png" alt="" style="height:100%;width:100%;object-fit:contain" />
                        </text>}
                        </div>
                    </div>
                    <div id="panel_info" class="col-lg-7">
                        <div class="product-information">
                            <!--/author-information-->
                            <h2>@Model.Name</h2>
                            @*<p>Web ID: 1089772</p>*@
                            <div><img src="~/Assets/images/product-details/rating.png" alt="" /></div>
                            @if (!string.IsNullOrEmpty(Model.Code))
                            {
                                <p><b>Trang web: </b></p>
                                <p><a href="//@Model.Code" target="_blank">@Model.Code</a></p><br />
                            }
                            <p><b>Mô tả:</b></p>
                            <p> @Model.Description </p>
                            <a href="" onclick="alert('Tính năng này sẽ được cập nhật sớm')"><img src="~/Assets/images/product-details/share.png" class="share img-responsive" alt="" /></a>
                        </div><!--/author-information-->
                    </div>
                </div><!--/author-details-->

                @if ((Model.Books != null) && (Model.Books.Count > 0))
                {// liệt kê sách của tác giả này
                    
                    <div class="some-books"><hr />
                        <!--recommended_items-->
                        <h3 style="margin-top:5px">Một số sách</h3>
                        <div @if (Model.Books.Count > 3) { <text>
                             id="books-carousel" class="carousel slide" data-ride="carousel"
                             </text> }>
                            <div @if (Model.Books.Count > 3) { <text>
                                 class="carousel-inner"
                                 </text> }>
                                <div class="item active">
                                    @{BookStore.Models.Product product;}
                                    @for (int i = 0; i < ((Model.Books.Count < 4) ? Model.Books.Count : 4); i++)
                                    {
                                        product = Model.Books.ElementAt(i).Product;
                                    <div class="col-md-3 product-men" style="margin-bottom:20px">
                                        <div class="product-chr-info chr">
                                            <div class="thumbnail">
                                                @if (string.IsNullOrEmpty(product.AvatarImage))
            {
                                    <img style="height:150px;width:100%;object-fit:contain"
                                         src="/Assets/images/home/default-image.png" />
}
else
{
                                    <img style="height:150px;width:100%;object-fit:contain"
                                         src="@Url.Content(product.AvatarImage)"
                                         onerror="if (this.src != '/Assets/images/home/default-image.png') this.src = '/Assets/images/home/default-image.png';" />
}

                                            </div>
                                            <hr style="margin:0px;border-color:#DDD" />
                                            <div class="caption">
                                                <div class="title-caption">
                                                    <h4 @*style="text-overflow: ellipsis;white-space:nowrap;overflow:hidden"*@><b>@product.Name</b></h4>
                                                    <span class="tooltiptext">@product.Name</span>
                                                </div>

                                                <div class="matrlf-mid">
                                                    <ul class="price-list">
                                                        <li>
                                                            @(product.Price.ToString("0,0.###", ci)) đ
                                                        </li>
                                                    </ul>

                                                    <div class="clearfix"> </div>
                                                </div>
                                                <form action="#" method="post">
                                                    <input type="hidden" name="cmd" value="_cart">
                                                    <input type="hidden" name="add" value="1">
                                                    <input type="hidden" name="chr_item" value="@product.Name">
                                                    <input type="hidden" name="amount" value="@product.Price">
                                                    <a href="" class="chr-cart" onclick="updateCart('add',@product.ID, event)">
                                                        <p hidden>@product.ID</p>
                                                        <i class="fa fa-cart-plus" aria-hidden="true"></i>
                                                        Thêm vào giỏ
                                                    </a>
                                                    <a href="#" data-toggle="modal" data-target="#myModal1"></a>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                    }
                                </div>
                                @if (Model.Books.Count > 4)
                                {
                                    for (int i = 4; i < Model.Books.Count; i += 4)
                                    {
                                        <div class="item">
                                            @for (int j = i; j < ((Model.Books.Count < (i + 4)) ? Model.Books.Count : (i + 4)); j++)
                                            {
                                                product = Model.Books.ElementAt(j).Product;
                                            <div class="col-md-3 product-men" style="margin-bottom:20px">
                                                <div class="product-chr-info chr">
                                                    <div class="thumbnail">
                                                        @if (string.IsNullOrEmpty(product.AvatarImage))
            {
                                            <img style="height:150px;width:100%;object-fit:contain"
                                                 src="/Assets/images/home/default-image.png" />
}
else
{
                                            <img style="height:150px;width:100%;object-fit:contain"
                                                 src="@Url.Content(product.AvatarImage)"
                                                 onerror="if (this.src != '/Assets/images/home/default-image.png') this.src = '/Assets/images/home/default-image.png';" />
}

                                                    </div>
                                                    <hr style="margin:0px;border-color:#DDD" />
                                                    <div class="caption">
                                                        <div class="title-caption">
                                                            <h4 @*style="text-overflow: ellipsis;white-space:nowrap;overflow:hidden"*@><b>@product.Name</b></h4>
                                                            <span class="tooltiptext">@product.Name</span>
                                                        </div>

                                                        <div class="matrlf-mid">
                                                            <ul class="price-list">
                                                                <li>
                                                                    @(product.Price.ToString("0,0.###", ci)) đ
                                                                </li>
                                                            </ul>

                                                            <div class="clearfix"> </div>
                                                        </div>
                                                        <form action="#" method="post">
                                                            <input type="hidden" name="cmd" value="_cart">
                                                            <input type="hidden" name="add" value="1">
                                                            <input type="hidden" name="chr_item" value="@product.Name">
                                                            <input type="hidden" name="amount" value="@product.Price">
                                                            <a href="" class="chr-cart" onclick="updateCart('add',@product.ID, event)">
                                                                <p hidden>@product.ID</p>
                                                                <i class="fa fa-cart-plus" aria-hidden="true"></i>
                                                                Thêm vào giỏ
                                                            </a>
                                                            <a href="#" data-toggle="modal" data-target="#myModal1"></a>
                                                        </form>
                                                    </div>
                                                </div>
                                            </div>
                                            }

                                        </div>
                                    }
                                }
                            </div>

                            @if ((Model.Books != null) && (Model.Books.Count > 3))
                            {
                                <a class="left carousel-control" href="#books-carousel" data-slide="prev">
                                    <i class="fa fa-angle-left"></i>
                                </a>
                                <a class="right carousel-control" href="#books-carousel" data-slide="next">
                                    <i class="fa fa-angle-right"></i>
                                </a>
                            }
                        </div>
                    </div><!--/recommended_items-->
                }

            </div>
        </div>
    </div>
</section>
